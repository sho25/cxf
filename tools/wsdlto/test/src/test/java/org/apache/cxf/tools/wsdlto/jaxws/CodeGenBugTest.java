begin_unit|revision:0.9.5;language:Java;cregit-version:0.0.1
begin_comment
comment|/**  * Licensed to the Apache Software Foundation (ASF) under one  * or more contributor license agreements. See the NOTICE file  * distributed with this work for additional information  * regarding copyright ownership. The ASF licenses this file  * to you under the Apache License, Version 2.0 (the  * "License"); you may not use this file except in compliance  * with the License. You may obtain a copy of the License at  *  * http://www.apache.org/licenses/LICENSE-2.0  *  * Unless required by applicable law or agreed to in writing,  * software distributed under the License is distributed on an  * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY  * KIND, either express or implied. See the License for the  * specific language governing permissions and limitations  * under the License.  */
end_comment

begin_package
package|package
name|org
operator|.
name|apache
operator|.
name|cxf
operator|.
name|tools
operator|.
name|wsdlto
operator|.
name|jaxws
package|;
end_package

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|BufferedInputStream
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|ByteArrayOutputStream
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|File
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|FileInputStream
import|;
end_import

begin_import
import|import
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Method
import|;
end_import

begin_import
import|import
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Modifier
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|List
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|jws
operator|.
name|WebService
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|xml
operator|.
name|namespace
operator|.
name|QName
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|xml
operator|.
name|ws
operator|.
name|WebFault
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|xml
operator|.
name|ws
operator|.
name|WebServiceClient
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cxf
operator|.
name|common
operator|.
name|i18n
operator|.
name|Message
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cxf
operator|.
name|helpers
operator|.
name|FileUtils
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cxf
operator|.
name|tools
operator|.
name|common
operator|.
name|ProcessorTestBase
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cxf
operator|.
name|tools
operator|.
name|common
operator|.
name|ToolConstants
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cxf
operator|.
name|tools
operator|.
name|util
operator|.
name|AnnotationUtil
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cxf
operator|.
name|tools
operator|.
name|wsdlto
operator|.
name|WSDLToJava
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cxf
operator|.
name|tools
operator|.
name|wsdlto
operator|.
name|core
operator|.
name|DataBindingProfile
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cxf
operator|.
name|tools
operator|.
name|wsdlto
operator|.
name|core
operator|.
name|FrontEndProfile
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cxf
operator|.
name|tools
operator|.
name|wsdlto
operator|.
name|core
operator|.
name|PluginLoader
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cxf
operator|.
name|tools
operator|.
name|wsdlto
operator|.
name|frontend
operator|.
name|jaxws
operator|.
name|JAXWSContainer
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cxf
operator|.
name|tools
operator|.
name|wsdlto
operator|.
name|frontend
operator|.
name|jaxws
operator|.
name|validator
operator|.
name|UniqueBodyValidator
import|;
end_import

begin_import
import|import
name|org
operator|.
name|junit
operator|.
name|After
import|;
end_import

begin_import
import|import
name|org
operator|.
name|junit
operator|.
name|Before
import|;
end_import

begin_import
import|import
name|org
operator|.
name|junit
operator|.
name|Test
import|;
end_import

begin_import
import|import
name|org
operator|.
name|mortbay
operator|.
name|jetty
operator|.
name|Server
import|;
end_import

begin_import
import|import
name|org
operator|.
name|mortbay
operator|.
name|jetty
operator|.
name|handler
operator|.
name|ResourceHandler
import|;
end_import

begin_class
specifier|public
class|class
name|CodeGenBugTest
extends|extends
name|ProcessorTestBase
block|{
specifier|private
name|JAXWSContainer
name|processor
decl_stmt|;
specifier|private
name|ClassLoader
name|classLoader
decl_stmt|;
annotation|@
name|Before
specifier|public
name|void
name|setUp
parameter_list|()
throws|throws
name|Exception
block|{
name|super
operator|.
name|setUp
argument_list|()
expr_stmt|;
name|File
name|classFile
init|=
operator|new
name|java
operator|.
name|io
operator|.
name|File
argument_list|(
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/classes"
argument_list|)
decl_stmt|;
name|classFile
operator|.
name|mkdir
argument_list|()
expr_stmt|;
name|System
operator|.
name|setProperty
argument_list|(
literal|"java.class.path"
argument_list|,
name|getClassPath
argument_list|()
operator|+
name|classFile
operator|.
name|getCanonicalPath
argument_list|()
operator|+
name|File
operator|.
name|separatorChar
argument_list|)
expr_stmt|;
name|classLoader
operator|=
name|AnnotationUtil
operator|.
name|getClassLoader
argument_list|(
name|Thread
operator|.
name|currentThread
argument_list|()
operator|.
name|getContextClassLoader
argument_list|()
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_COMPILE
argument_list|,
name|ToolConstants
operator|.
name|CFG_COMPILE
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CLASSDIR
argument_list|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/classes"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|FrontEndProfile
operator|.
name|class
argument_list|,
name|PluginLoader
operator|.
name|getInstance
argument_list|()
operator|.
name|getFrontEndProfile
argument_list|(
literal|"jaxws"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|DataBindingProfile
operator|.
name|class
argument_list|,
name|PluginLoader
operator|.
name|getInstance
argument_list|()
operator|.
name|getDataBindingProfile
argument_list|(
literal|"jaxb"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_IMPL
argument_list|,
literal|"impl"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_OUTPUTDIR
argument_list|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_SUPPRESS_WARNINGS
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|processor
operator|=
operator|new
name|JAXWSContainer
argument_list|(
literal|null
argument_list|)
expr_stmt|;
block|}
annotation|@
name|After
specifier|public
name|void
name|tearDown
parameter_list|()
block|{
name|super
operator|.
name|tearDown
argument_list|()
expr_stmt|;
comment|//processor = null;
name|env
operator|=
literal|null
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testBug305729
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug305729/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|assertNotNull
argument_list|(
literal|"Process message with no part wsdl error"
argument_list|,
name|output
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testBug305773
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_COMPILE
argument_list|,
literal|"compile"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_IMPL
argument_list|,
name|ToolConstants
operator|.
name|CFG_IMPL
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_OUTPUTDIR
argument_list|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CLASSDIR
argument_list|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/classes"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug305773/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.w2j.hello_world_soap_http.GreeterImpl"
argument_list|)
decl_stmt|;
name|WebService
name|webServiceAnn
init|=
name|AnnotationUtil
operator|.
name|getPrivClassAnnotation
argument_list|(
name|clz
argument_list|,
name|WebService
operator|.
name|class
argument_list|)
decl_stmt|;
name|assertEquals
argument_list|(
literal|"Greeter"
argument_list|,
name|webServiceAnn
operator|.
name|name
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
literal|"Impl class should generate portName property value in webService annotation"
argument_list|,
name|webServiceAnn
operator|.
name|portName
argument_list|()
operator|.
name|equals
argument_list|(
literal|""
argument_list|)
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
literal|"Impl class should generate serviceName property value in webService annotation"
argument_list|,
name|webServiceAnn
operator|.
name|serviceName
argument_list|()
operator|.
name|equals
argument_list|(
literal|""
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testBug305700
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_COMPILE
argument_list|,
literal|"compile"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_OUTPUTDIR
argument_list|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CLASSDIR
argument_list|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/classes"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CLIENT
argument_list|,
name|ToolConstants
operator|.
name|CFG_CLIENT
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug305700/addNumbers.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testNamespacePackageMapping1
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|addNamespacePackageMap
argument_list|(
literal|"http://cxf.apache.org/w2j/hello_world_soap_http/types"
argument_list|,
literal|"org.apache.types"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|File
name|org
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|org
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|apache
init|=
operator|new
name|File
argument_list|(
name|org
argument_list|,
literal|"apache"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|apache
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|types
init|=
operator|new
name|File
argument_list|(
name|apache
argument_list|,
literal|"types"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|types
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
index|[]
name|files
init|=
name|apache
operator|.
name|listFiles
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
literal|2
argument_list|,
name|files
operator|.
name|length
argument_list|)
expr_stmt|;
name|files
operator|=
name|types
operator|.
name|listFiles
argument_list|()
expr_stmt|;
name|assertEquals
argument_list|(
literal|17
argument_list|,
name|files
operator|.
name|length
argument_list|)
expr_stmt|;
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.types.GreetMe"
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
name|clz
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testNamespacePackageMapping2
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|addNamespacePackageMap
argument_list|(
literal|"http://cxf.apache.org/w2j/hello_world_soap_http"
argument_list|,
literal|"org.apache"
argument_list|)
expr_stmt|;
name|env
operator|.
name|addNamespacePackageMap
argument_list|(
literal|"http://cxf.apache.org/w2j/hello_world_soap_http/types"
argument_list|,
literal|"org.apache.types"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|File
name|org
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
literal|"org directory is not found"
argument_list|,
name|org
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|apache
init|=
operator|new
name|File
argument_list|(
name|org
argument_list|,
literal|"apache"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
literal|"apache directory is not found"
argument_list|,
name|apache
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|types
init|=
operator|new
name|File
argument_list|(
name|apache
argument_list|,
literal|"types"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
literal|"types directory is not found"
argument_list|,
name|types
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.types.GreetMe"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
literal|"Generate "
operator|+
name|clz
operator|.
name|getName
argument_list|()
operator|+
literal|"error"
argument_list|,
name|Modifier
operator|.
name|isPublic
argument_list|(
name|clz
operator|.
name|getModifiers
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|clz
operator|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.Greeter"
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testNamespacePackageMapping3
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_PACKAGENAME
argument_list|,
literal|"org.cxf"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|File
name|org
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|org
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|cxf
init|=
operator|new
name|File
argument_list|(
name|org
argument_list|,
literal|"cxf"
argument_list|)
decl_stmt|;
name|File
index|[]
name|files
init|=
name|cxf
operator|.
name|listFiles
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
literal|23
argument_list|,
name|files
operator|.
name|length
argument_list|)
expr_stmt|;
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.cxf.Greeter"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
literal|"Generate "
operator|+
name|clz
operator|.
name|getName
argument_list|()
operator|+
literal|"error"
argument_list|,
name|clz
operator|.
name|isInterface
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testBug305772
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_COMPILE
argument_list|,
literal|"compile"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_ANT
argument_list|,
name|ToolConstants
operator|.
name|CFG_ANT
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_OUTPUTDIR
argument_list|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CLASSDIR
argument_list|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/classes"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CLIENT
argument_list|,
name|ToolConstants
operator|.
name|CFG_CLIENT
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug305772/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|File
name|file
init|=
operator|new
name|File
argument_list|(
name|output
operator|.
name|getCanonicalPath
argument_list|()
argument_list|,
literal|"build.xml"
argument_list|)
decl_stmt|;
name|FileInputStream
name|fileinput
init|=
operator|new
name|FileInputStream
argument_list|(
name|file
argument_list|)
decl_stmt|;
name|BufferedInputStream
name|filebuffer
init|=
operator|new
name|BufferedInputStream
argument_list|(
name|fileinput
argument_list|)
decl_stmt|;
name|byte
index|[]
name|buffer
init|=
operator|new
name|byte
index|[
operator|(
name|int
operator|)
name|file
operator|.
name|length
argument_list|()
index|]
decl_stmt|;
name|filebuffer
operator|.
name|read
argument_list|(
name|buffer
argument_list|)
expr_stmt|;
name|String
name|content
init|=
operator|new
name|String
argument_list|(
name|buffer
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
literal|"wsdl location should be url style in build.xml"
argument_list|,
name|content
operator|.
name|indexOf
argument_list|(
literal|"param1=\"file:"
argument_list|)
operator|>
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testExcludeNSWithPackageName
parameter_list|()
throws|throws
name|Exception
block|{
name|String
index|[]
name|args
init|=
operator|new
name|String
index|[]
block|{
literal|"-d"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
block|,
literal|"-nexclude"
block|,
literal|"http://apache.org/test/types=com.iona"
block|,
literal|"-nexclude"
block|,
literal|"http://apache.org/Invoice"
block|,
literal|"-compile"
block|,
literal|"-classdir"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/classes"
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/hello_world_exclude.wsdl"
argument_list|)
block|}
decl_stmt|;
name|WSDLToJava
operator|.
name|main
argument_list|(
name|args
argument_list|)
expr_stmt|;
name|assertNotNull
argument_list|(
name|output
argument_list|)
expr_stmt|;
name|File
name|com
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"com"
argument_list|)
decl_stmt|;
name|assertFalse
argument_list|(
literal|"Generated file has been excluded"
argument_list|,
name|com
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|iona
init|=
operator|new
name|File
argument_list|(
name|com
argument_list|,
literal|"iona"
argument_list|)
decl_stmt|;
name|assertFalse
argument_list|(
literal|"Generated file has been excluded"
argument_list|,
name|iona
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|implFile
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/apache/cxf/w2j/hello_world_soap_http/Greeter.java"
argument_list|)
decl_stmt|;
name|String
name|str
init|=
name|FileUtils
operator|.
name|getStringFromFile
argument_list|(
name|implFile
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|str
operator|.
name|indexOf
argument_list|(
literal|"com.iona.BareDocumentResponse"
argument_list|)
operator|>
literal|0
argument_list|)
expr_stmt|;
name|File
name|org
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org"
argument_list|)
decl_stmt|;
name|File
name|apache
init|=
operator|new
name|File
argument_list|(
name|org
argument_list|,
literal|"apache"
argument_list|)
decl_stmt|;
name|File
name|invoice
init|=
operator|new
name|File
argument_list|(
name|apache
argument_list|,
literal|"Invoice"
argument_list|)
decl_stmt|;
name|assertFalse
argument_list|(
literal|"Generated file has been excluded"
argument_list|,
name|invoice
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testExcludeNSWithoutPackageName
parameter_list|()
throws|throws
name|Exception
block|{
name|String
index|[]
name|args
init|=
operator|new
name|String
index|[]
block|{
literal|"-d"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
block|,
literal|"-nexclude"
block|,
literal|"http://apache.org/test/types"
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/hello_world_exclude.wsdl"
argument_list|)
block|}
decl_stmt|;
name|WSDLToJava
operator|.
name|main
argument_list|(
name|args
argument_list|)
expr_stmt|;
name|assertNotNull
argument_list|(
name|output
argument_list|)
expr_stmt|;
name|File
name|com
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"test"
argument_list|)
decl_stmt|;
name|assertFalse
argument_list|(
literal|"Generated file has been excluded"
argument_list|,
name|com
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testCommandLine
parameter_list|()
throws|throws
name|Exception
block|{
name|String
index|[]
name|args
init|=
operator|new
name|String
index|[]
block|{
literal|"-compile"
block|,
literal|"-d"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
block|,
literal|"-classdir"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/classes"
block|,
literal|"-p"
block|,
literal|"org.cxf"
block|,
literal|"-p"
block|,
literal|"http://apache.org/hello_world_soap_http/types=org.apache.types"
block|,
literal|"-server"
block|,
literal|"-impl"
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/hello_world.wsdl"
argument_list|)
block|}
decl_stmt|;
name|WSDLToJava
operator|.
name|main
argument_list|(
name|args
argument_list|)
expr_stmt|;
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.cxf.Greeter"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
literal|"Generate "
operator|+
name|clz
operator|.
name|getName
argument_list|()
operator|+
literal|"error"
argument_list|,
name|clz
operator|.
name|isInterface
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testDefaultLoadNSMappingOFF
parameter_list|()
throws|throws
name|Exception
block|{
name|String
index|[]
name|args
init|=
operator|new
name|String
index|[]
block|{
literal|"-dns"
block|,
literal|"false"
block|,
literal|"-d"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
block|,
literal|"-noAddressBinding"
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/basic_callback.wsdl"
argument_list|)
block|}
decl_stmt|;
name|WSDLToJava
operator|.
name|main
argument_list|(
name|args
argument_list|)
expr_stmt|;
name|assertNotNull
argument_list|(
name|output
argument_list|)
expr_stmt|;
name|File
name|org
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|org
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|w3
init|=
operator|new
name|File
argument_list|(
name|org
argument_list|,
literal|"w3"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|w3
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|p2005
init|=
operator|new
name|File
argument_list|(
name|w3
argument_list|,
literal|"_2005"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|p2005
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|p08
init|=
operator|new
name|File
argument_list|(
name|p2005
argument_list|,
literal|"_08"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|p08
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|address
init|=
operator|new
name|File
argument_list|(
name|p08
argument_list|,
literal|"addressing"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|address
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
index|[]
name|files
init|=
name|address
operator|.
name|listFiles
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
literal|11
argument_list|,
name|files
operator|.
name|length
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testDefaultLoadNSMappingON
parameter_list|()
throws|throws
name|Exception
block|{
name|String
index|[]
name|args
init|=
operator|new
name|String
index|[]
block|{
literal|"-d"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
block|,
literal|"-noAddressBinding"
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/basic_callback.wsdl"
argument_list|)
block|}
decl_stmt|;
name|WSDLToJava
operator|.
name|main
argument_list|(
name|args
argument_list|)
expr_stmt|;
name|assertNotNull
argument_list|(
name|output
argument_list|)
expr_stmt|;
name|File
name|org
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|org
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|apache
init|=
operator|new
name|File
argument_list|(
name|org
argument_list|,
literal|"apache"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|apache
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|cxf
init|=
operator|new
name|File
argument_list|(
name|apache
argument_list|,
literal|"cxf"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|cxf
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|ws
init|=
operator|new
name|File
argument_list|(
name|cxf
argument_list|,
literal|"ws"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|ws
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|address
init|=
operator|new
name|File
argument_list|(
name|ws
argument_list|,
literal|"addressing"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|address
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
index|[]
name|files
init|=
name|address
operator|.
name|listFiles
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
literal|11
argument_list|,
name|files
operator|.
name|length
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testBug305924ForNestedBinding
parameter_list|()
block|{
try|try
block|{
name|String
index|[]
name|args
init|=
operator|new
name|String
index|[]
block|{
literal|"-all"
block|,
literal|"-compile"
block|,
literal|"-classdir"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/classes"
block|,
literal|"-d"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
block|,
literal|"-b"
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug305924/binding2.xml"
argument_list|)
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug305924/hello_world.wsdl"
argument_list|)
block|}
decl_stmt|;
name|WSDLToJava
operator|.
name|main
argument_list|(
name|args
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
name|fail
argument_list|(
literal|"Error during wsdl2java: \n"
operator|+
name|e
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
block|}
try|try
block|{
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.w2j.hello_world_soap_http.types.CreateProcess$MyProcess"
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
literal|"Customization binding code should be generated"
argument_list|,
name|clz
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|ClassNotFoundException
name|e
parameter_list|)
block|{
name|fail
argument_list|(
literal|"Can not load the inner class MyProcess, the customization failed: \n"
operator|+
name|e
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
annotation|@
name|Test
specifier|public
name|void
name|testBug305924ForExternalBinding
parameter_list|()
block|{
try|try
block|{
name|String
index|[]
name|args
init|=
operator|new
name|String
index|[]
block|{
literal|"-all"
block|,
literal|"-compile"
block|,
literal|"-classdir"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/classes"
block|,
literal|"-d"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
block|,
literal|"-b"
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug305924/binding1.xml"
argument_list|)
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug305924/hello_world.wsdl"
argument_list|)
block|}
decl_stmt|;
name|WSDLToJava
operator|.
name|main
argument_list|(
name|args
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
name|e
operator|.
name|printStackTrace
argument_list|(
name|System
operator|.
name|err
argument_list|)
expr_stmt|;
block|}
try|try
block|{
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.w2j.hello_world_soap_http.types.CreateProcess$MyProcess"
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
literal|"Customization binding code should be generated"
argument_list|,
name|clz
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|ClassNotFoundException
name|e
parameter_list|)
block|{
name|e
operator|.
name|printStackTrace
argument_list|()
expr_stmt|;
block|}
block|}
annotation|@
name|Test
specifier|public
name|void
name|testLocatorWithJaxbBinding
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/locator_with_jaxbbinding.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testWsdlNoService
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/helloworld_withnoservice.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testNoServiceImport
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/helloworld_noservice_import.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|Class
name|cls
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.w2j.hello_world1.Greeter"
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
name|cls
argument_list|)
expr_stmt|;
name|cls
operator|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.w2j.hello_world2.Greeter2"
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testServiceNS
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_ALL
argument_list|,
name|ToolConstants
operator|.
name|CFG_ALL
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug321/hello_world_different_ns_service.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.w2j.hello_world_soap_http.service.SOAPServiceTest1"
argument_list|)
decl_stmt|;
name|WebServiceClient
name|webServiceClient
init|=
name|AnnotationUtil
operator|.
name|getPrivClassAnnotation
argument_list|(
name|clz
argument_list|,
name|WebServiceClient
operator|.
name|class
argument_list|)
decl_stmt|;
name|assertEquals
argument_list|(
literal|"http://cxf.apache.org/w2j/hello_world_soap_http/service"
argument_list|,
name|webServiceClient
operator|.
name|targetNamespace
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|file
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/apache/cxf/w2j/hello_world_soap_http/Greeter_SoapPortTest1_Client.java"
argument_list|)
decl_stmt|;
name|FileInputStream
name|fin
init|=
operator|new
name|FileInputStream
argument_list|(
name|file
argument_list|)
decl_stmt|;
name|byte
index|[]
name|buffer
init|=
operator|new
name|byte
index|[
literal|30000
index|]
decl_stmt|;
name|int
name|index
init|=
operator|-
literal|1
decl_stmt|;
name|int
name|size
init|=
name|fin
operator|.
name|read
argument_list|(
name|buffer
argument_list|)
decl_stmt|;
name|ByteArrayOutputStream
name|bout
init|=
operator|new
name|ByteArrayOutputStream
argument_list|()
decl_stmt|;
while|while
condition|(
name|size
operator|!=
operator|-
literal|1
condition|)
block|{
name|bout
operator|.
name|write
argument_list|(
name|buffer
argument_list|,
literal|0
argument_list|,
name|size
argument_list|)
expr_stmt|;
name|index
operator|=
name|bout
operator|.
name|toString
argument_list|()
operator|.
name|indexOf
argument_list|(
literal|"new QName(\"http://cxf.apache.org/w2j/hello_world_soap_http/service\","
operator|+
literal|" \"SOAPService_Test1\")"
argument_list|)
expr_stmt|;
if|if
condition|(
name|index
operator|>
literal|0
condition|)
block|{
break|break;
block|}
name|size
operator|=
name|fin
operator|.
name|read
argument_list|(
name|buffer
argument_list|)
expr_stmt|;
block|}
name|assertTrue
argument_list|(
literal|"Service QName in client is not correct"
argument_list|,
name|index
operator|>
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testNoServiceNOPortType
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_ALL
argument_list|,
name|ToolConstants
operator|.
name|CFG_ALL
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/no_port_or_service.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.no_port_or_service.types.TheComplexType"
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
name|clz
argument_list|)
expr_stmt|;
block|}
comment|// CXF-492
annotation|@
name|Test
specifier|public
name|void
name|testDefatultNsMap
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_ALL
argument_list|,
name|ToolConstants
operator|.
name|CFG_ALL
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_NO_ADDRESS_BINDING
argument_list|,
name|ToolConstants
operator|.
name|CFG_NO_ADDRESS_BINDING
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf492/locator.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|File
name|org
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
literal|"org directory is not exist"
argument_list|,
name|org
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|apache
init|=
operator|new
name|File
argument_list|(
name|org
argument_list|,
literal|"apache"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|apache
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|cxf
init|=
operator|new
name|File
argument_list|(
name|apache
argument_list|,
literal|"cxf"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|cxf
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|ws
init|=
operator|new
name|File
argument_list|(
name|cxf
argument_list|,
literal|"ws"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|ws
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|address
init|=
operator|new
name|File
argument_list|(
name|ws
argument_list|,
literal|"addressing"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|address
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testDefatultNsMapExclude
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_ALL
argument_list|,
name|ToolConstants
operator|.
name|CFG_ALL
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_NEXCLUDE
argument_list|,
literal|"http://www.w3.org/2005/08/addressing=org.apache.cxf.ws.addressing"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf492/locator.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|File
name|org
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
literal|"org directory is not exist"
argument_list|,
name|org
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|apache
init|=
operator|new
name|File
argument_list|(
name|org
argument_list|,
literal|"apache"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|apache
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|ws
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/apache/cxf/ws/addressing"
argument_list|)
decl_stmt|;
name|assertFalse
argument_list|(
name|ws
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|orginal
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org.w3._2005._08.addressing"
argument_list|)
decl_stmt|;
name|assertFalse
argument_list|(
name|orginal
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testHelloWorldExternalBindingFile
parameter_list|()
throws|throws
name|Exception
block|{
name|Server
name|server
init|=
operator|new
name|Server
argument_list|(
literal|8585
argument_list|)
decl_stmt|;
name|ResourceHandler
name|reshandler
init|=
operator|new
name|ResourceHandler
argument_list|()
decl_stmt|;
name|reshandler
operator|.
name|setResourceBase
argument_list|(
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/"
argument_list|)
argument_list|)
expr_stmt|;
name|server
operator|.
name|addHandler
argument_list|(
name|reshandler
argument_list|)
expr_stmt|;
name|server
operator|.
name|start
argument_list|()
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
literal|"http://localhost:8585/hello_world.wsdl"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
literal|"http://localhost:8585/remote-hello_world_binding.xsd"
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
try|try
block|{
name|reshandler
operator|.
name|stop
argument_list|()
expr_stmt|;
block|}
finally|finally
block|{
name|server
operator|.
name|stop
argument_list|()
expr_stmt|;
name|server
operator|.
name|destroy
argument_list|()
expr_stmt|;
block|}
block|}
annotation|@
name|Test
specifier|public
name|void
name|testDefaultNSWithPkg
parameter_list|()
throws|throws
name|Exception
block|{
name|String
index|[]
name|args
init|=
operator|new
name|String
index|[]
block|{
literal|"-d"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
block|,
literal|"-p"
block|,
literal|"org.cxf"
block|,
literal|"-noAddressBinding"
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/basic_callback.wsdl"
argument_list|)
block|}
decl_stmt|;
name|WSDLToJava
operator|.
name|main
argument_list|(
name|args
argument_list|)
expr_stmt|;
name|assertNotNull
argument_list|(
name|output
argument_list|)
expr_stmt|;
name|File
name|org
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|org
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|apache
init|=
operator|new
name|File
argument_list|(
name|org
argument_list|,
literal|"apache"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|apache
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|cxf
init|=
operator|new
name|File
argument_list|(
name|apache
argument_list|,
literal|"cxf"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|cxf
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|ws
init|=
operator|new
name|File
argument_list|(
name|cxf
argument_list|,
literal|"ws"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|ws
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
name|address
init|=
operator|new
name|File
argument_list|(
name|ws
argument_list|,
literal|"addressing"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|address
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|File
index|[]
name|files
init|=
name|address
operator|.
name|listFiles
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
literal|11
argument_list|,
name|files
operator|.
name|length
argument_list|)
expr_stmt|;
name|cxf
operator|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/cxf"
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|cxf
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|files
operator|=
name|cxf
operator|.
name|listFiles
argument_list|()
expr_stmt|;
name|assertEquals
argument_list|(
literal|5
argument_list|,
name|files
operator|.
name|length
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testCXF677
parameter_list|()
throws|throws
name|Exception
block|{
name|String
index|[]
name|args
init|=
operator|new
name|String
index|[]
block|{
literal|"-d"
block|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
block|,
literal|"-b"
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/hello-mime-binding.xml"
argument_list|)
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/hello-mime.wsdl"
argument_list|)
block|}
decl_stmt|;
name|WSDLToJava
operator|.
name|main
argument_list|(
name|args
argument_list|)
expr_stmt|;
name|String
name|str1
init|=
literal|"SOAPBinding.ParameterStyle.BARE"
decl_stmt|;
name|String
name|str2
init|=
literal|"javax.xml.ws.Holder"
decl_stmt|;
name|String
name|str3
init|=
literal|"org.apache.cxf.mime.Address"
decl_stmt|;
name|String
name|str4
init|=
literal|"http://cxf.apache.org/w2j/hello_world_mime/types"
decl_stmt|;
name|String
name|file
init|=
name|getStringFromFile
argument_list|(
operator|new
name|File
argument_list|(
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/org/apache/cxf/w2j/hello_world_mime/Hello.java"
argument_list|)
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|file
operator|.
name|contains
argument_list|(
name|str1
argument_list|)
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|file
operator|.
name|contains
argument_list|(
name|str2
argument_list|)
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|file
operator|.
name|contains
argument_list|(
name|str3
argument_list|)
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|file
operator|.
name|contains
argument_list|(
name|str4
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testWebResult
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/sayHi.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|String
name|results
init|=
name|FileUtils
operator|.
name|getStringFromFile
argument_list|(
operator|new
name|File
argument_list|(
name|output
operator|.
name|getCanonicalPath
argument_list|()
argument_list|,
literal|"org/apache/sayhi/SayHi.java"
argument_list|)
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|results
operator|.
name|trim
argument_list|()
operator|.
name|length
argument_list|()
operator|>
literal|0
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|results
operator|.
name|indexOf
argument_list|(
literal|"@WebResult(name  =  \"return\",  "
operator|+
literal|"targetNamespace  =  \"http://apache.org/sayHi\")"
argument_list|)
operator|!=
operator|-
literal|1
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|results
operator|.
name|indexOf
argument_list|(
literal|"@WebResult(name  =  \"return\",  targetNamespace  =  \"\")"
argument_list|)
operator|!=
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testCXF627
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug627/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug627/async_binding.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.w2j.hello_world_soap_http.Greeter"
argument_list|)
decl_stmt|;
name|assertEquals
argument_list|(
literal|3
argument_list|,
name|clz
operator|.
name|getDeclaredMethods
argument_list|()
operator|.
name|length
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
comment|// Test for CXF-765
specifier|public
name|void
name|testClientServer
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug765/hello_world_ports.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|remove
argument_list|(
name|ToolConstants
operator|.
name|CFG_COMPILE
argument_list|)
expr_stmt|;
name|env
operator|.
name|remove
argument_list|(
name|ToolConstants
operator|.
name|CFG_IMPL
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_GEN_SERVER
argument_list|,
name|ToolConstants
operator|.
name|CFG_GEN_SERVER
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_GEN_CLIENT
argument_list|,
name|ToolConstants
operator|.
name|CFG_GEN_CLIENT
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|File
name|file
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/apache/cxf/w2j/hello_world_soap_http"
argument_list|)
decl_stmt|;
name|assertEquals
argument_list|(
literal|4
argument_list|,
name|file
operator|.
name|list
argument_list|()
operator|.
name|length
argument_list|)
expr_stmt|;
name|file
operator|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/apache/cxf/w2j/hello_world_soap_http/DocLitBare_DocLitBarePort_Client.java"
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
literal|"DocLitBare_DocLitBarePort_Client is not found"
argument_list|,
name|file
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|file
operator|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/apache/cxf/w2j/hello_world_soap_http/DocLitBare_DocLitBarePort_Server.java"
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
literal|"DocLitBare_DocLitBarePort_Server is not found"
argument_list|,
name|file
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|file
operator|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/apache/cxf/w2j/hello_world_soap_http/Greeter_GreeterPort_Client.java"
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
literal|"Greeter_GreeterPort_Client is not found"
argument_list|,
name|file
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|file
operator|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/apache/cxf/w2j/hello_world_soap_http/Greeter_GreeterPort_Server.java"
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
literal|"Greeter_GreeterPort_Server is not found"
argument_list|,
name|file
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testRecursiveImport
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf778/hello_world_recursive.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|assertNotNull
argument_list|(
literal|"Process recursive import wsdl error "
argument_list|,
name|output
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testCXF804
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf804/hello_world_contains_import.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
comment|// env.put(ToolConstants.CFG_SERVICENAME, "SOAPService");
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|File
name|file
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/apache/cxf/w2j/hello_world_soap_http/MyService.java"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
literal|"MyService is not found"
argument_list|,
name|file
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testDefinieServiceName
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf804/hello_world_contains_import.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_SERVICENAME
argument_list|,
literal|"SOAPService"
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|File
name|file
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/apache/cxf/w2j/hello_world_soap_http/SOAPService.java"
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
literal|"SOAPService is not found"
argument_list|,
name|file
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
name|file
operator|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/apache/cxf/w2j/hello_world_soap_http/MyService.java"
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
literal|"MyService should not be generated"
argument_list|,
name|file
operator|.
name|exists
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testCXF805
parameter_list|()
throws|throws
name|Exception
block|{
try|try
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf805/hello_world_with_typo.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CLIENT
argument_list|,
name|ToolConstants
operator|.
name|CFG_CLIENT
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|fail
argument_list|(
literal|"exception should be thrown"
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
name|String
name|expectedErrorMsg
init|=
literal|"Part<in> in Message "
operator|+
literal|"<{http://cxf.apache.org/w2j/hello_world_soap_http}greetMeRequest> referenced Type "
operator|+
literal|"<{http://cxf.apache.org/w2j/hello_world_soap_http/types}greetMee> can not be "
operator|+
literal|"found in the schemas"
decl_stmt|;
name|assertTrue
argument_list|(
literal|"Fail to create java parameter exception should be thrown"
argument_list|,
name|e
operator|.
name|getMessage
argument_list|()
operator|.
name|indexOf
argument_list|(
name|expectedErrorMsg
argument_list|)
operator|>
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
annotation|@
name|Test
specifier|public
name|void
name|testAntFile
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_ANT
argument_list|,
name|ToolConstants
operator|.
name|CFG_ANT
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_SERVICENAME
argument_list|,
literal|"SOAPService_Test1"
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|File
name|file
init|=
operator|new
name|File
argument_list|(
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/build.xml"
argument_list|)
decl_stmt|;
name|String
name|str
init|=
name|FileUtils
operator|.
name|getStringFromFile
argument_list|(
name|file
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|str
operator|.
name|indexOf
argument_list|(
literal|"org.apache.cxf.w2j.hello_world_soap_http.Greeter_SoapPortTest1_Client"
argument_list|)
operator|>
operator|-
literal|1
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|str
operator|.
name|indexOf
argument_list|(
literal|"org.apache.cxf.w2j.hello_world_soap_http.Greeter_SoapPortTest2_Client"
argument_list|)
operator|>
operator|-
literal|1
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|str
operator|.
name|indexOf
argument_list|(
literal|"org.apache.cxf.w2j.hello_world_soap_http.Greeter_SoapPortTest1_Server"
argument_list|)
operator|>
operator|-
literal|1
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|str
operator|.
name|indexOf
argument_list|(
literal|"org.apache.cxf.w2j.hello_world_soap_http.Greeter_SoapPortTest2_Server"
argument_list|)
operator|>
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testNonUniqueBody
parameter_list|()
throws|throws
name|Exception
block|{
try|try
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf939/bug.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
comment|// env.put(ToolConstants.CFG_VALIDATE_WSDL,
comment|// ToolConstants.CFG_VALIDATE_WSDL);
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
name|String
name|ns
init|=
literal|"http://bugs.cxf/services/bug1"
decl_stmt|;
name|QName
name|bug1
init|=
operator|new
name|QName
argument_list|(
name|ns
argument_list|,
literal|"myBug1"
argument_list|)
decl_stmt|;
name|QName
name|bug2
init|=
operator|new
name|QName
argument_list|(
name|ns
argument_list|,
literal|"myBug2"
argument_list|)
decl_stmt|;
name|Message
name|msg1
init|=
operator|new
name|Message
argument_list|(
literal|"NON_UNIQUE_BODY"
argument_list|,
name|UniqueBodyValidator
operator|.
name|LOG
argument_list|,
name|bug1
argument_list|,
name|bug1
argument_list|,
name|bug2
argument_list|,
name|bug1
argument_list|)
decl_stmt|;
name|Message
name|msg2
init|=
operator|new
name|Message
argument_list|(
literal|"NON_UNIQUE_BODY"
argument_list|,
name|UniqueBodyValidator
operator|.
name|LOG
argument_list|,
name|bug1
argument_list|,
name|bug2
argument_list|,
name|bug1
argument_list|,
name|bug1
argument_list|)
decl_stmt|;
name|boolean
name|boolA
init|=
name|msg1
operator|.
name|toString
argument_list|()
operator|.
name|trim
argument_list|()
operator|.
name|equals
argument_list|(
name|e
operator|.
name|getMessage
argument_list|()
operator|.
name|trim
argument_list|()
argument_list|)
decl_stmt|;
name|boolean
name|boolB
init|=
name|msg2
operator|.
name|toString
argument_list|()
operator|.
name|trim
argument_list|()
operator|.
name|equals
argument_list|(
name|e
operator|.
name|getMessage
argument_list|()
operator|.
name|trim
argument_list|()
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|boolA
operator|||
name|boolB
argument_list|)
expr_stmt|;
block|}
block|}
annotation|@
name|Test
specifier|public
name|void
name|testWrapperStyleNameCollision
parameter_list|()
throws|throws
name|Exception
block|{
try|try
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf918/bug.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
name|String
name|ns1
init|=
literal|"http://bugs.cxf/services/bug1"
decl_stmt|;
name|String
name|ns2
init|=
literal|"http://www.w3.org/2001/XMLSchema"
decl_stmt|;
name|QName
name|elementName
init|=
operator|new
name|QName
argument_list|(
name|ns1
argument_list|,
literal|"theSameNameFieldDifferentDataType"
argument_list|)
decl_stmt|;
name|QName
name|stringName
init|=
operator|new
name|QName
argument_list|(
name|ns2
argument_list|,
literal|"string"
argument_list|)
decl_stmt|;
name|QName
name|intName
init|=
operator|new
name|QName
argument_list|(
name|ns2
argument_list|,
literal|"int"
argument_list|)
decl_stmt|;
name|Message
name|msg
init|=
operator|new
name|Message
argument_list|(
literal|"WRAPPER_STYLE_NAME_COLLISION"
argument_list|,
name|UniqueBodyValidator
operator|.
name|LOG
argument_list|,
name|elementName
argument_list|,
name|stringName
argument_list|,
name|intName
argument_list|)
decl_stmt|;
name|assertEquals
argument_list|(
name|msg
operator|.
name|toString
argument_list|()
operator|.
name|trim
argument_list|()
argument_list|,
name|e
operator|.
name|getMessage
argument_list|()
operator|.
name|trim
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
annotation|@
name|Test
specifier|public
name|void
name|testNonWrapperStyleNameCollision
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf918/bug2.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testParameterOrderNoOutputMessage
parameter_list|()
throws|throws
name|Exception
block|{
try|try
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug967.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
name|fail
argument_list|(
literal|"The cxf967.wsdl is a valid wsdl, should pass the test, caused by: "
operator|+
name|e
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
annotation|@
name|Test
specifier|public
name|void
name|testParameterOrderDifferentNS
parameter_list|()
throws|throws
name|Exception
block|{
try|try
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/bug978/bug.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|String
name|results
init|=
name|FileUtils
operator|.
name|getStringFromFile
argument_list|(
operator|new
name|File
argument_list|(
name|output
operator|.
name|getCanonicalPath
argument_list|()
argument_list|,
literal|"org/tempuri/GreeterRPCLit.java"
argument_list|)
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|results
operator|.
name|indexOf
argument_list|(
literal|"@WebParam(partName  =  \"inInt\",  name  =  \"inInt\")"
argument_list|)
operator|!=
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
name|fail
argument_list|(
literal|"The cxf978.wsdl is a valid wsdl, should pass the test, caused by: "
operator|+
name|e
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
annotation|@
name|Test
specifier|public
name|void
name|testAsyncImplAndClient
parameter_list|()
throws|throws
name|Exception
block|{
comment|// CXF994
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_COMPILE
argument_list|,
literal|"compile"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_OUTPUTDIR
argument_list|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CLASSDIR
argument_list|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/classes"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CLIENT
argument_list|,
name|ToolConstants
operator|.
name|CFG_CLIENT
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf994/hello_world_async.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf994/async.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testZeroInputOutOfBandHeader
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_COMPILE
argument_list|,
literal|"compile"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1001.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_EXTRA_SOAPHEADER
argument_list|,
literal|"TRUE"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_OUTPUTDIR
argument_list|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CLASSDIR
argument_list|,
name|output
operator|.
name|getCanonicalPath
argument_list|()
operator|+
literal|"/classes"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CLIENT
argument_list|,
name|ToolConstants
operator|.
name|CFG_CLIENT
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|String
name|results
init|=
name|FileUtils
operator|.
name|getStringFromFile
argument_list|(
operator|new
name|File
argument_list|(
name|output
operator|.
name|getCanonicalPath
argument_list|()
argument_list|,
literal|"soapinterface/ems/esendex/com/AccountServiceSoap.java"
argument_list|)
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|results
operator|.
name|indexOf
argument_list|(
literal|"public  int  getMessageLimit"
argument_list|)
operator|!=
operator|-
literal|1
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|results
operator|.
name|indexOf
argument_list|(
literal|"name  =  \"MessengerHeader"
argument_list|)
operator|!=
operator|-
literal|1
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|results
operator|.
name|indexOf
argument_list|(
literal|"header  =  true"
argument_list|)
operator|!=
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testBindingForImportWSDL
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1095/hello_world_services.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
operator|new
name|String
index|[]
block|{
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1095/binding.xml"
argument_list|)
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1095/binding1.xml"
argument_list|)
block|}
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.w2j.hello_world.messages.CustomizedFault"
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
literal|"Customization Fault Class is not generated"
argument_list|,
name|clz
argument_list|)
expr_stmt|;
name|Class
name|serviceClz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.w2j.hello_world.services.CustomizedService"
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
literal|"Customization Fault Class is not generated"
argument_list|,
name|serviceClz
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testReuseJaxwsBindingFile
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1094/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1094/async_binding.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|Class
argument_list|<
name|?
argument_list|>
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.w2j.hello_world_soap_http.Greeter"
argument_list|)
decl_stmt|;
name|Method
name|method1
init|=
name|clz
operator|.
name|getMethod
argument_list|(
literal|"greetMeSometimeAsync"
argument_list|,
operator|new
name|Class
index|[]
block|{
name|java
operator|.
name|lang
operator|.
name|String
operator|.
name|class
block|,
name|javax
operator|.
name|xml
operator|.
name|ws
operator|.
name|AsyncHandler
operator|.
name|class
block|}
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
literal|"jaxws binding file does not take effect for hello_world.wsdl"
argument_list|,
name|method1
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1094/echo_date.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1094/async_binding.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|clz
operator|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.tools.fortest.date.EchoDate"
argument_list|)
expr_stmt|;
name|Method
name|method2
init|=
name|clz
operator|.
name|getMethod
argument_list|(
literal|"echoDateAsync"
argument_list|,
operator|new
name|Class
index|[]
block|{
name|javax
operator|.
name|xml
operator|.
name|datatype
operator|.
name|XMLGregorianCalendar
operator|.
name|class
block|,
name|javax
operator|.
name|xml
operator|.
name|ws
operator|.
name|AsyncHandler
operator|.
name|class
block|}
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
literal|"jaxws binding file does not take effect for echo_date.wsdl"
argument_list|,
name|method2
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testReuseJabBindingFile1
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1094/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1094/jaxbbinding.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.w2j.hello_world_soap_http.types.CreateProcess$MyProcess"
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
literal|"Failed to generate customized class for hello_world.wsdl"
argument_list|,
name|clz
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1094/hello_world_oneway.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1094/jaxbbinding.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|Class
name|customizedClz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.oneway.types.CreateProcess$MyProcess"
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
literal|"Failed to generate customized class for hello_world_oneway.wsdl"
argument_list|,
name|customizedClz
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testBindingXPath
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1106/binding.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.cxf.w2j.hello_world_soap_http.Greeter"
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
literal|"Failed to generate SEI class"
argument_list|,
name|clz
argument_list|)
expr_stmt|;
name|Method
index|[]
name|methods
init|=
name|clz
operator|.
name|getMethods
argument_list|()
decl_stmt|;
name|assertEquals
argument_list|(
literal|"jaxws binding file parse error, number of generated method is not expected"
argument_list|,
literal|14
argument_list|,
name|methods
operator|.
name|length
argument_list|)
expr_stmt|;
name|boolean
name|existSayHiAsyn
init|=
literal|false
decl_stmt|;
for|for
control|(
name|Method
name|m
range|:
name|methods
control|)
block|{
if|if
condition|(
name|m
operator|.
name|getName
argument_list|()
operator|.
name|equals
argument_list|(
literal|"sayHiAsyn"
argument_list|)
condition|)
block|{
name|existSayHiAsyn
operator|=
literal|true
expr_stmt|;
block|}
block|}
name|assertFalse
argument_list|(
literal|"sayHiAsyn method should not be generated"
argument_list|,
name|existSayHiAsyn
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testJaxbCatalog
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1112/myservice.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CATALOG
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1112/catalog.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1112/jaxbbinding.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|Class
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.mytest.ObjectFactory"
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
literal|"Customization types class should be generated"
argument_list|,
name|clz
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testCatalog2
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
literal|"http://example.org/wsdl"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CATALOG
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1112/jax-ws-catalog.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1112/binding.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testCatalog3
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
literal|"http://example.org/wsdl"
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_CATALOG
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1112/jax-ws-catalog2.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1112/binding.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testServer
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/InvoiceServer.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
operator|new
name|String
index|[]
block|{
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1141/jaxws.xml"
argument_list|)
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1141/jaxb.xml"
argument_list|)
block|}
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|File
name|file
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/mytest"
argument_list|)
decl_stmt|;
name|assertEquals
argument_list|(
literal|13
argument_list|,
name|file
operator|.
name|list
argument_list|()
operator|.
name|length
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testCxf1137
parameter_list|()
block|{
try|try
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1137/helloWorld.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|fail
argument_list|(
literal|"The wsdl is not a valid wsdl, see cxf-1137"
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
name|assertTrue
argument_list|(
name|e
operator|.
name|getMessage
argument_list|()
operator|.
name|indexOf
argument_list|(
literal|"Summary:  Failures: 5, Warnings: 0"
argument_list|)
operator|!=
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
annotation|@
name|Test
specifier|public
name|void
name|testTwoJaxwsBindingFile
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
operator|new
name|String
index|[]
block|{
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1152/jaxws1.xml"
argument_list|)
block|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1152/jaxws2.xml"
argument_list|)
block|}
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|File
name|file
init|=
operator|new
name|File
argument_list|(
name|output
argument_list|,
literal|"org/mypkg"
argument_list|)
decl_stmt|;
name|assertEquals
argument_list|(
literal|23
argument_list|,
name|file
operator|.
name|listFiles
argument_list|()
operator|.
name|length
argument_list|)
expr_stmt|;
name|Class
argument_list|<
name|?
argument_list|>
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.mypkg.MyService"
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
literal|"Customized service class is not found"
argument_list|,
name|clz
argument_list|)
expr_stmt|;
name|clz
operator|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.mypkg.MyGreeter"
argument_list|)
expr_stmt|;
name|assertNotNull
argument_list|(
literal|"Customized SEI class is not found"
argument_list|,
name|clz
argument_list|)
expr_stmt|;
name|Method
name|customizedMethod
init|=
name|clz
operator|.
name|getMethod
argument_list|(
literal|"myGreetMe"
argument_list|,
operator|new
name|Class
index|[]
block|{
name|String
operator|.
name|class
block|}
argument_list|)
decl_stmt|;
name|assertNotNull
argument_list|(
literal|"Customized method 'myGreetMe' in MyGreeter.class is not found"
argument_list|,
name|customizedMethod
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testJaxwsBindingJavaDoc
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/hello_world.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_BINDING
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1152/jaxws1.xml"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|List
argument_list|<
name|String
argument_list|>
name|results1
init|=
name|FileUtils
operator|.
name|readLines
argument_list|(
operator|new
name|File
argument_list|(
name|output
operator|.
name|getCanonicalPath
argument_list|()
argument_list|,
literal|"org/mypkg/MyGreeter.java"
argument_list|)
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|results1
operator|.
name|contains
argument_list|(
literal|" * this is package javadoc"
argument_list|)
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|results1
operator|.
name|contains
argument_list|(
literal|"  * this is class javadoc"
argument_list|)
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|results1
operator|.
name|contains
argument_list|(
literal|" * this is method javadoc"
argument_list|)
argument_list|)
expr_stmt|;
name|List
argument_list|<
name|String
argument_list|>
name|results2
init|=
name|FileUtils
operator|.
name|readLines
argument_list|(
operator|new
name|File
argument_list|(
name|output
operator|.
name|getCanonicalPath
argument_list|()
argument_list|,
literal|"org/mypkg/SOAPService.java"
argument_list|)
argument_list|)
decl_stmt|;
name|boolean
name|match1
init|=
literal|false
decl_stmt|;
name|boolean
name|match2
init|=
literal|false
decl_stmt|;
for|for
control|(
name|String
name|str
range|:
name|results2
control|)
block|{
if|if
condition|(
name|str
operator|.
name|contains
argument_list|(
literal|"package javadoc"
argument_list|)
condition|)
block|{
name|match1
operator|=
literal|true
expr_stmt|;
block|}
if|if
condition|(
name|str
operator|.
name|contains
argument_list|(
literal|"class javadoc"
argument_list|)
condition|)
block|{
name|match2
operator|=
literal|true
expr_stmt|;
block|}
block|}
name|assertTrue
argument_list|(
name|match1
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|match2
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testWSAActionAnno
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf1209/hello_world_fault.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
block|}
annotation|@
name|Test
specifier|public
name|void
name|testCXF964
parameter_list|()
throws|throws
name|Exception
block|{
name|env
operator|.
name|put
argument_list|(
name|ToolConstants
operator|.
name|CFG_WSDLURL
argument_list|,
name|getLocation
argument_list|(
literal|"/wsdl2java_wsdl/cxf964/hello_world_fault.wsdl"
argument_list|)
argument_list|)
expr_stmt|;
name|processor
operator|.
name|setContext
argument_list|(
name|env
argument_list|)
expr_stmt|;
name|processor
operator|.
name|execute
argument_list|()
expr_stmt|;
name|Class
argument_list|<
name|?
argument_list|>
name|clz
init|=
name|classLoader
operator|.
name|loadClass
argument_list|(
literal|"org.apache.intfault.BadRecordLitFault"
argument_list|)
decl_stmt|;
name|WebFault
name|webFault
init|=
name|AnnotationUtil
operator|.
name|getPrivClassAnnotation
argument_list|(
name|clz
argument_list|,
name|WebFault
operator|.
name|class
argument_list|)
decl_stmt|;
name|assertEquals
argument_list|(
literal|"int"
argument_list|,
name|webFault
operator|.
name|name
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
end_class

end_unit

